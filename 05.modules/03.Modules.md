# Modules

## Code Organization

- Modules allow us to split our code into multiple smaller files based on single responsibility pronciple.
- This improves, readability, debugging and maintainability.

## Scoping

- Modules create their own scope called Module. All the data added by a script tag is now scoped under module scope.
- It prevents memory leaks and name conflicts.

## Data privacy

- Modules provide a way to expose only the necessary details to the outside world while keeping the internal implementation hidden.

## Dependencies

- With modules managing dependencies is a lot easier.


## Communication between modules

- Based on single responsibility principle, we have created several modules.
- Now, these modules need to communicate to achieve a functionality.

## 1.Exporting module data

- I have a module whose data I want to access in the main module.
- Firstly, we need to export the data that we want to share with the outside world.
- This is done using the export statement.


``` javascript
export const name = "square";

export function draw(ctx, length, x, y, color) {
  ctx.fillStyle = color;
  ctx.fillRect(x, y, length, length);

  return { length, x, y, color };
}
```

- The easiest way to use it is to place it in front of any items you want exported out of the module.
- We can export functions, let, var, const and classes.
- They need to be top level items. We cannot use export inside a method.

``` javascript
export { name, draw, reportArea, reportPerimeter };
```

- Instead of prefixing our data with export at multiple places, we can use the single export statement at the bottom of our file.


## 2.Importing module data

- Once, we have exported some data from a module, we nned to import that data to use it.
- After importing, we can use the features like they are defined on the same file.
- The imported values are readonly. Like const, we cannot reassign the imported values but can modify the object properties.

``` javascript
import { name, draw, reportArea, reportPerimeter } from "./modules/square.js";
```

- I want to borrow from a mentioned file, these all mentioned features.

## 3. Applying the module to your HTML

- This is very similar to how we apply regular scripts to our HTML page.
- Only difference is that we need to add `type="module"`.
- We can only use `import` and `export` statements inside modules not regular scripts.
- You should generally define all your modules in separate files.
- Modules declared inline in HTML can only import other modules, but anything they export will not be accessible by other modules (because they don't have a URL).

### Other differences between modules and classic scripts

- Modules cannot be served by local file system. They need to be served through a server. Else they will give CORS error if run via local path.
- Modules uses `strict` mode automatically.
- 

``` html
<script type="module" src="main.js"></script>
```

``` html
<script type="module">
  /* JavaScript module code here */
</script>
```


## Loading non-JavaScript resources

- We can import non JS resources like JSON and CSS using modules.
- We must explicitly declare what kind of resource you are importing. By default it is assumed that we are importing JS resource.
- We define the type using `with` and `type`

``` javascript
import colors from "./colors.json" with { type: "json" };
import styles from "./styles.css" with { type: "css" };
```
